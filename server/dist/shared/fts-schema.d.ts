/**
 * Single Source of Truth f√ºr FTS5 Virtual Tables und Trigger.
 * Wird importiert von:
 *   - server/src/db.ts (TS-Import)
 *   - scripts/ensure-db.js (via Build-Artefakt: server/dist/shared/fts-schema.js)
 */
export declare const FTS_TABLES = "\nCREATE VIRTUAL TABLE IF NOT EXISTS learnings_fts USING fts5(anti_pattern, correct_pattern, context, content='learnings', content_rowid='id');\nCREATE VIRTUAL TABLE IF NOT EXISTS decisions_fts USING fts5(title, reasoning, content='decisions', content_rowid='id');\nCREATE VIRTUAL TABLE IF NOT EXISTS errors_fts USING fts5(error_message, root_cause, fix_description, content='errors', content_rowid='id');\nCREATE VIRTUAL TABLE IF NOT EXISTS notes_fts USING fts5(text, content='notes', content_rowid='id');\nCREATE VIRTUAL TABLE IF NOT EXISTS sessions_fts USING fts5(summary, key_changes, content='sessions', content_rowid='rowid');\nCREATE VIRTUAL TABLE IF NOT EXISTS unfinished_fts USING fts5(description, context, content='unfinished', content_rowid='id');\n";
export declare const FTS_TRIGGER_DROPS = "\nDROP TRIGGER IF EXISTS learnings_ai;\nDROP TRIGGER IF EXISTS learnings_au;\nDROP TRIGGER IF EXISTS learnings_ad;\nDROP TRIGGER IF EXISTS decisions_ai;\nDROP TRIGGER IF EXISTS decisions_au;\nDROP TRIGGER IF EXISTS decisions_ad;\nDROP TRIGGER IF EXISTS errors_ai;\nDROP TRIGGER IF EXISTS errors_au;\nDROP TRIGGER IF EXISTS errors_ad;\nDROP TRIGGER IF EXISTS notes_ai;\nDROP TRIGGER IF EXISTS notes_au;\nDROP TRIGGER IF EXISTS notes_ad;\nDROP TRIGGER IF EXISTS sessions_ai;\nDROP TRIGGER IF EXISTS sessions_au;\nDROP TRIGGER IF EXISTS sessions_ad;\nDROP TRIGGER IF EXISTS unfinished_ai;\nDROP TRIGGER IF EXISTS unfinished_au;\nDROP TRIGGER IF EXISTS unfinished_ad;\n";
export declare const FTS_TRIGGERS = "\nCREATE TRIGGER IF NOT EXISTS learnings_ai AFTER INSERT ON learnings BEGIN\n    INSERT INTO learnings_fts(rowid, anti_pattern, correct_pattern, context)\n    VALUES (new.id, new.anti_pattern, new.correct_pattern, COALESCE(new.context,''));\nEND;\n\nCREATE TRIGGER IF NOT EXISTS learnings_au AFTER UPDATE OF anti_pattern, correct_pattern, context ON learnings BEGIN\n    INSERT INTO learnings_fts(learnings_fts, rowid, anti_pattern, correct_pattern, context)\n    VALUES ('delete', old.id, old.anti_pattern, old.correct_pattern, COALESCE(old.context,''));\n    INSERT INTO learnings_fts(rowid, anti_pattern, correct_pattern, context)\n    VALUES (new.id, new.anti_pattern, new.correct_pattern, COALESCE(new.context,''));\nEND;\n\nCREATE TRIGGER IF NOT EXISTS learnings_ad AFTER DELETE ON learnings BEGIN\n    INSERT INTO learnings_fts(learnings_fts, rowid, anti_pattern, correct_pattern, context)\n    VALUES ('delete', old.id, old.anti_pattern, old.correct_pattern, COALESCE(old.context,''));\nEND;\n\nCREATE TRIGGER IF NOT EXISTS decisions_ai AFTER INSERT ON decisions BEGIN\n    INSERT INTO decisions_fts(rowid, title, reasoning)\n    VALUES (new.id, new.title, COALESCE(new.reasoning,''));\nEND;\n\nCREATE TRIGGER IF NOT EXISTS decisions_au AFTER UPDATE OF title, reasoning ON decisions BEGIN\n    INSERT INTO decisions_fts(decisions_fts, rowid, title, reasoning)\n    VALUES ('delete', old.id, old.title, COALESCE(old.reasoning,''));\n    INSERT INTO decisions_fts(rowid, title, reasoning)\n    VALUES (new.id, new.title, COALESCE(new.reasoning,''));\nEND;\n\nCREATE TRIGGER IF NOT EXISTS decisions_ad AFTER DELETE ON decisions BEGIN\n    INSERT INTO decisions_fts(decisions_fts, rowid, title, reasoning)\n    VALUES ('delete', old.id, old.title, COALESCE(old.reasoning,''));\nEND;\n\nCREATE TRIGGER IF NOT EXISTS errors_ai AFTER INSERT ON errors BEGIN\n    INSERT INTO errors_fts(rowid, error_message, root_cause, fix_description)\n    VALUES (new.id, COALESCE(new.error_message,''), COALESCE(new.root_cause,''), COALESCE(new.fix_description,''));\nEND;\n\nCREATE TRIGGER IF NOT EXISTS errors_au AFTER UPDATE OF error_message, root_cause, fix_description ON errors BEGIN\n    INSERT INTO errors_fts(errors_fts, rowid, error_message, root_cause, fix_description)\n    VALUES ('delete', old.id, COALESCE(old.error_message,''), COALESCE(old.root_cause,''), COALESCE(old.fix_description,''));\n    INSERT INTO errors_fts(rowid, error_message, root_cause, fix_description)\n    VALUES (new.id, COALESCE(new.error_message,''), COALESCE(new.root_cause,''), COALESCE(new.fix_description,''));\nEND;\n\nCREATE TRIGGER IF NOT EXISTS errors_ad AFTER DELETE ON errors BEGIN\n    INSERT INTO errors_fts(errors_fts, rowid, error_message, root_cause, fix_description)\n    VALUES ('delete', old.id, COALESCE(old.error_message,''), COALESCE(old.root_cause,''), COALESCE(old.fix_description,''));\nEND;\n\nCREATE TRIGGER IF NOT EXISTS notes_ai AFTER INSERT ON notes BEGIN\n    INSERT INTO notes_fts(rowid, text)\n    VALUES (new.id, new.text);\nEND;\n\nCREATE TRIGGER IF NOT EXISTS notes_au AFTER UPDATE OF text ON notes BEGIN\n    INSERT INTO notes_fts(notes_fts, rowid, text)\n    VALUES ('delete', old.id, old.text);\n    INSERT INTO notes_fts(rowid, text)\n    VALUES (new.id, new.text);\nEND;\n\nCREATE TRIGGER IF NOT EXISTS notes_ad AFTER DELETE ON notes BEGIN\n    INSERT INTO notes_fts(notes_fts, rowid, text)\n    VALUES ('delete', old.id, old.text);\nEND;\n\nCREATE TRIGGER IF NOT EXISTS sessions_ai AFTER INSERT ON sessions BEGIN\n    INSERT INTO sessions_fts(rowid, summary, key_changes)\n    VALUES (new.rowid, COALESCE(new.summary,''), COALESCE(new.key_changes,''));\nEND;\n\nCREATE TRIGGER IF NOT EXISTS sessions_au AFTER UPDATE OF summary, key_changes ON sessions BEGIN\n    INSERT INTO sessions_fts(sessions_fts, rowid, summary, key_changes)\n    VALUES ('delete', old.rowid, COALESCE(old.summary,''), COALESCE(old.key_changes,''));\n    INSERT INTO sessions_fts(rowid, summary, key_changes)\n    VALUES (new.rowid, COALESCE(new.summary,''), COALESCE(new.key_changes,''));\nEND;\n\nCREATE TRIGGER IF NOT EXISTS sessions_ad AFTER DELETE ON sessions BEGIN\n    INSERT INTO sessions_fts(sessions_fts, rowid, summary, key_changes)\n    VALUES ('delete', old.rowid, COALESCE(old.summary,''), COALESCE(old.key_changes,''));\nEND;\n\nCREATE TRIGGER IF NOT EXISTS unfinished_ai AFTER INSERT ON unfinished BEGIN\n    INSERT INTO unfinished_fts(rowid, description, context)\n    VALUES (new.id, new.description, COALESCE(new.context,''));\nEND;\n\nCREATE TRIGGER IF NOT EXISTS unfinished_au AFTER UPDATE OF description, context ON unfinished BEGIN\n    INSERT INTO unfinished_fts(unfinished_fts, rowid, description, context)\n    VALUES ('delete', old.id, old.description, COALESCE(old.context,''));\n    INSERT INTO unfinished_fts(rowid, description, context)\n    VALUES (new.id, new.description, COALESCE(new.context,''));\nEND;\n\nCREATE TRIGGER IF NOT EXISTS unfinished_ad AFTER DELETE ON unfinished BEGIN\n    INSERT INTO unfinished_fts(unfinished_fts, rowid, description, context)\n    VALUES ('delete', old.id, old.description, COALESCE(old.context,''));\nEND;\n";
//# sourceMappingURL=fts-schema.d.ts.map